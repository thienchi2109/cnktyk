# Cloudflare Pages Configuration for CNKTYKLT Platform
# This file configures the Cloudflare Pages deployment

name = "cnktyklt-platform"
compatibility_date = "2025-01-10"
pages_build_output_dir = ".vercel/output/static"

# Node.js compatibility for Next.js
compatibility_flags = ["nodejs_compat"]

# Environment variables for production
[env.production]
NODE_VERSION = "20"

# Build configuration
[build]
command = "npm run build"
cwd = ""
watch_dirs = ["src", "components", "lib"]

# R2 bucket bindings for file storage
[[r2_buckets]]
binding = "EVIDENCE_FILES"
bucket_name = "cnktyklt-syt"
preview_bucket_name = "cnktyklt-syt-preview"

# KV namespace for session storage (optional)
[[kv_namespaces]]
binding = "SESSIONS"
id = "placeholder_production_id"
preview_id = "placeholder_preview_id"

# Analytics engine binding (optional)
[[analytics_engine_datasets]]
binding = "ANALYTICS"

# Custom domains (configure after deployment)
# routes = [
#   { pattern = "cnktyklt.gov.vn", custom_domain = true },
#   { pattern = "www.cnktyklt.gov.vn", custom_domain = true }
# ]
